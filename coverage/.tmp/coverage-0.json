{"/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/security/rateLimiter.ts":{"path":"/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/security/rateLimiter.ts","statementMap":{"0":{"start":{"line":2,"column":27},"end":{"line":8,"column":1}},"1":{"start":{"line":3,"column":2},"end":{"line":7,"column":5}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":27},"end":{"line":2,"column":28}},"loc":{"start":{"line":2,"column":56},"end":{"line":8,"column":1}},"line":2}},"branchMap":{},"s":{"0":1,"1":4},"f":{"0":4},"b":{},"inputSourceMap":{"version":3,"sources":["/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/security/rateLimiter.ts"],"sourcesContent":["import { RateLimit } from \"koa2-ratelimit\";\r\n\r\n/**\r\n * Limits the number of requests to a given number in a given time frame\r\n * @param {number} max - number - The number of requests allowed in the time frame.\r\n * @param {number} timeFrameInMinutes - The time frame in minutes in which the limit is applied.\r\n * @returns A function that takes in two parameters and returns a function.\r\n */\r\nexport const rateLimiter = (max: number, timeFrameInMinutes: number) => {\r\n    return RateLimit.middleware({\r\n        interval: { min: timeFrameInMinutes },\r\n        max: max,\r\n        message: `Request limit exceeded`,\r\n    });\r\n}"],"mappings":"AAAA,SAAS,iBAAiB;AAQnB,aAAM,cAAc,CAAC,KAAa,uBAA+B;AACpE,SAAO,UAAU,WAAW;AAAA,IACxB,UAAU,EAAE,KAAK,mBAAmB;AAAA,IACpC;AAAA,IACA,SAAS;AAAA,EACb,CAAC;AACL;","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f202d3e9f63f922079e5b86550ba8ddcb3fff813"},"/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/routes/hotel.ts":{"path":"/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/routes/hotel.ts","statementMap":{"0":{"start":{"line":5,"column":23},"end":{"line":7,"column":1}},"1":{"start":{"line":8,"column":15},"end":{"line":8,"column":17}},"2":{"start":{"line":9,"column":27},"end":{"line":37,"column":1}},"3":{"start":{"line":38,"column":26},"end":{"line":69,"column":1}},"4":{"start":{"line":70,"column":0},"end":{"line":72,"column":3}},"5":{"start":{"line":74,"column":2},"end":{"line":78,"column":3}},"6":{"start":{"line":75,"column":4},"end":{"line":75,"column":54}},"7":{"start":{"line":77,"column":4},"end":{"line":77,"column":22}},"8":{"start":{"line":80,"column":2},"end":{"line":84,"column":4}},"9":{"start":{"line":86,"column":21},"end":{"line":86,"column":37}},"10":{"start":{"line":87,"column":2},"end":{"line":101,"column":3}},"11":{"start":{"line":88,"column":23},"end":{"line":88,"column":53}},"12":{"start":{"line":89,"column":33},"end":{"line":89,"column":111}},"13":{"start":{"line":89,"column":62},"end":{"line":89,"column":110}},"14":{"start":{"line":90,"column":4},"end":{"line":95,"column":5}},"15":{"start":{"line":91,"column":6},"end":{"line":91,"column":23}},"16":{"start":{"line":92,"column":6},"end":{"line":92,"column":80}},"17":{"start":{"line":94,"column":6},"end":{"line":94,"column":28}},"18":{"start":{"line":96,"column":9},"end":{"line":101,"column":3}},"19":{"start":{"line":97,"column":4},"end":{"line":97,"column":21}},"20":{"start":{"line":98,"column":4},"end":{"line":98,"column":46}},"21":{"start":{"line":100,"column":4},"end":{"line":100,"column":22}},"22":{"start":{"line":103,"column":23},"end":{"line":109,"column":8}},"23":{"start":{"line":104,"column":27},"end":{"line":104,"column":90}},"24":{"start":{"line":104,"column":68},"end":{"line":104,"column":89}},"25":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"26":{"start":{"line":106,"column":6},"end":{"line":106,"column":34}},"27":{"start":{"line":108,"column":4},"end":{"line":108,"column":17}},"28":{"start":{"line":110,"column":2},"end":{"line":115,"column":3}},"29":{"start":{"line":111,"column":4},"end":{"line":111,"column":21}},"30":{"start":{"line":112,"column":4},"end":{"line":112,"column":66}},"31":{"start":{"line":114,"column":4},"end":{"line":114,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":73,"column":71},"end":{"line":73,"column":72}},"loc":{"start":{"line":73,"column":86},"end":{"line":79,"column":1}},"line":73},"1":{"name":"(anonymous_1)","decl":{"start":{"line":79,"column":44},"end":{"line":79,"column":45}},"loc":{"start":{"line":79,"column":59},"end":{"line":85,"column":1}},"line":79},"2":{"name":"(anonymous_2)","decl":{"start":{"line":85,"column":48},"end":{"line":85,"column":49}},"loc":{"start":{"line":85,"column":63},"end":{"line":102,"column":1}},"line":85},"3":{"name":"(anonymous_3)","decl":{"start":{"line":89,"column":51},"end":{"line":89,"column":52}},"loc":{"start":{"line":89,"column":62},"end":{"line":89,"column":110}},"line":89},"4":{"name":"(anonymous_4)","decl":{"start":{"line":102,"column":40},"end":{"line":102,"column":41}},"loc":{"start":{"line":102,"column":55},"end":{"line":116,"column":1}},"line":102},"5":{"name":"(anonymous_5)","decl":{"start":{"line":103,"column":50},"end":{"line":103,"column":51}},"loc":{"start":{"line":103,"column":66},"end":{"line":109,"column":3}},"line":103},"6":{"name":"(anonymous_6)","decl":{"start":{"line":104,"column":57},"end":{"line":104,"column":58}},"loc":{"start":{"line":104,"column":68},"end":{"line":104,"column":89}},"line":104}},"branchMap":{"0":{"loc":{"start":{"line":71,"column":36},"end":{"line":71,"column":104}},"type":"cond-expr","locations":[{"start":{"line":71,"column":77},"end":{"line":71,"column":95}},{"start":{"line":71,"column":98},"end":{"line":71,"column":104}}],"line":71},"1":{"loc":{"start":{"line":74,"column":2},"end":{"line":78,"column":3}},"type":"if","locations":[{"start":{"line":74,"column":2},"end":{"line":78,"column":3}},{"start":{"line":76,"column":9},"end":{"line":78,"column":3}}],"line":74},"2":{"loc":{"start":{"line":87,"column":2},"end":{"line":101,"column":3}},"type":"if","locations":[{"start":{"line":87,"column":2},"end":{"line":101,"column":3}},{"start":{"line":96,"column":9},"end":{"line":101,"column":3}}],"line":87},"3":{"loc":{"start":{"line":87,"column":6},"end":{"line":87,"column":50}},"type":"binary-expr","locations":[{"start":{"line":87,"column":6},"end":{"line":87,"column":16}},{"start":{"line":87,"column":20},"end":{"line":87,"column":50}}],"line":87},"4":{"loc":{"start":{"line":89,"column":62},"end":{"line":89,"column":110}},"type":"binary-expr","locations":[{"start":{"line":89,"column":62},"end":{"line":89,"column":84}},{"start":{"line":89,"column":88},"end":{"line":89,"column":110}}],"line":89},"5":{"loc":{"start":{"line":90,"column":4},"end":{"line":95,"column":5}},"type":"if","locations":[{"start":{"line":90,"column":4},"end":{"line":95,"column":5}},{"start":{"line":93,"column":11},"end":{"line":95,"column":5}}],"line":90},"6":{"loc":{"start":{"line":96,"column":9},"end":{"line":101,"column":3}},"type":"if","locations":[{"start":{"line":96,"column":9},"end":{"line":101,"column":3}},{"start":{"line":99,"column":9},"end":{"line":101,"column":3}}],"line":96},"7":{"loc":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},{"start":{},"end":{}}],"line":105},"8":{"loc":{"start":{"line":110,"column":2},"end":{"line":115,"column":3}},"type":"if","locations":[{"start":{"line":110,"column":2},"end":{"line":115,"column":3}},{"start":{"line":113,"column":9},"end":{"line":115,"column":3}}],"line":110}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":0,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":1,"18":1,"19":0,"20":0,"21":1,"22":2,"23":0,"24":0,"25":0,"26":0,"27":0,"28":2,"29":2,"30":2,"31":0},"f":{"0":2,"1":1,"2":2,"3":1,"4":2,"5":0,"6":0},"b":{"0":[0,1],"1":[2,0],"2":[1,1],"3":[2,1],"4":[1,0],"5":[0,1],"6":[0,1],"7":[0,0],"8":[2,0]},"inputSourceMap":{"version":3,"sources":["/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/routes/hotel.ts"],"sourcesContent":["import Router, { RouterContext } from \"koa-router\";\nimport dotenv from \"dotenv\";\nimport path from \"path\";\nimport { rateLimiter } from \"../security/rateLimiter\";\n\nconst ROUTER_OPTIONS = {\n    prefix: \"/hotel\",\n};\n\ninterface Picture {\n    photo1: string;\n    photo2: string;\n}\n\ninterface Hotel {\n    name: string;\n    pictures: Picture;\n    book?: string;\n}\n\ninterface Hotels {\n    [key: string]: Hotel[];\n}\n\nconst hotels = {\n}\n\nconst hotelsWithPictures: Hotels = {\n    \"hotel1\": [\n        {\n            \"name\": \"aaaaaaaaaaa\",\n            \"pictures\": {\n                \"photo1\": \"EEEEEEEEEEE.png\",\n                \"photo2\": \"DDDDDDDDDDD.png\"\n            }\n        }\n    ],\n    \"hotel2\": [\n        {\n            \"name\": \"bbbbbbbbbbbbbbb\",\n            \"pictures\": {\n                \"photo1\": \"FFFFFFFFFFF.png\",\n                \"photo2\": \"GGGGGGGGGGG.png\"\n            }\n        }\n    ],\n    \"hotel3\": [\n        {\n            \"name\": \"cccccccccccccccccccc\",\n            \"pictures\": {\n                \"photo1\": \"HHHHHHHHHHHH.png\",\n                \"photo2\": \"IIIIIIIIIIIIIIIIIIIIIIIIIIIIIII.png\"\n            }\n        }\n    ],\n};\n\nconst hotelsWithBooking: Hotels = {\n    \"hotel1\": [\n        {\n            \"name\": \"aaaaaaaaaaa\",\n            \"pictures\": {\n                \"photo1\": \"EEEEEEEEEEE.png\",\n                \"photo2\": \"DDDDDDDDDDD.png\"\n            },\n            \"book\": \"false\"\n        }\n    ],\n    \"hotel2\": [\n        {\n            \"name\": \"bbbbbbbbbbbbbbb\",\n            \"pictures\": {\n                \"photo1\": \"FFFFFFFFFFF.png\",\n                \"photo2\": \"GGGGGGGGGGG.png\"\n            },\n            \"book\": \"false\"\n        }\n    ],\n    \"hotel3\": [\n        {\n            \"name\": \"cccccccccccccccccccc\",\n            \"pictures\": {\n                \"photo1\": \"HHHHHHHHHHHH.png\",\n                \"photo2\": \"IIIIIIIIIIIIIIIIIIIIIIIIIIIIIII.png\"\n            },\n            \"book\": \"true\"\n        }\n    ],\n};\n\n// Load environment variables from .env.development or .env\ndotenv.config({\n    path: path.resolve(process.cwd(), process.env.NODE_ENV === \"development\" ? '.env.development' : '.env'),\n});\n\nexport default new Router(ROUTER_OPTIONS)\n\n    .get(\"/\", rateLimiter(15, 1), async (ctx: RouterContext) => {\n        if (Object.keys(hotels).length === 0) {\n            ctx.body = { message: \"Aucun hôtels disponible\" };\n        } else {\n            ctx.body = hotels;\n        }\n    })\n\n    .get(\"/reservations\", rateLimiter(15, 1), async (ctx: any) => {\n        ctx.body = {\n            \"reservation1\": \"aaaaaaaaaaa\",\n            \"reservation2\": \"bbbbbbbbb\",\n            \"reservation3\": \"ccccccccccc\"\n        }\n    })\n\n    .get(\"/pictures/:hotel?\", rateLimiter(15, 1), async (ctx: RouterContext) => {\n        const hotelParam = ctx.params.hotel as string;\n        if (hotelParam && hotelsWithPictures[hotelParam]) {\n            const hotelArray = hotelsWithPictures[hotelParam];\n            const hotelsWithNoPictures = hotelArray.filter(hotel => !hotel.pictures.photo1 && !hotel.pictures.photo2);\n            if (hotelsWithNoPictures.length > 0) {\n                ctx.status = 404;\n                ctx.body = { message: \"L'un des hôtels n'a aucune photo pour le moment\" };\n            } else {\n                ctx.body = hotelArray;\n            }\n        } else if (hotelParam) {\n            ctx.status = 404;\n            ctx.body = { message: \"Hotel not found\" };\n        } else {\n            ctx.body = hotels;\n        }\n    })\n\n    .get(\"/bookings\", rateLimiter(15, 1), async (ctx: RouterContext) => {\n        const bookedHotels = Object.keys(hotels).reduce((accum, key) => {\n            const filteredHotels = hotelsWithBooking[key].filter(hotel => hotel.book === \"true\");\n            if (filteredHotels.length > 0) {\n                accum[key] = filteredHotels;\n            }\n            return accum;\n        }, {} as Hotels);\n\n        if (Object.keys(bookedHotels).length === 0) {\n            ctx.status = 404;\n            ctx.body = { message: \"Vous n'avez fait aucune réservation\" };\n        } else {\n            ctx.body = bookedHotels;\n        }\n    });\n"],"mappings":"AAAA,OAAO,YAA+B;AACtC,OAAO,YAAY;AACnB,OAAO,UAAU;AACjB,SAAS,mBAAmB;AAE5B,MAAM,iBAAiB;AAAA,EACnB,QAAQ;AACZ;AAiBA,MAAM,SAAS,CACf;AAEA,MAAM,qBAA6B;AAAA,EAC/B,UAAU;AAAA,IACN;AAAA,MACI,QAAQ;AAAA,MACR,YAAY;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACd;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,UAAU;AAAA,IACN;AAAA,MACI,QAAQ;AAAA,MACR,YAAY;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACd;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,UAAU;AAAA,IACN;AAAA,MACI,QAAQ;AAAA,MACR,YAAY;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACd;AAAA,IACJ;AAAA,EACJ;AACJ;AAEA,MAAM,oBAA4B;AAAA,EAC9B,UAAU;AAAA,IACN;AAAA,MACI,QAAQ;AAAA,MACR,YAAY;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACd;AAAA,MACA,QAAQ;AAAA,IACZ;AAAA,EACJ;AAAA,EACA,UAAU;AAAA,IACN;AAAA,MACI,QAAQ;AAAA,MACR,YAAY;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACd;AAAA,MACA,QAAQ;AAAA,IACZ;AAAA,EACJ;AAAA,EACA,UAAU;AAAA,IACN;AAAA,MACI,QAAQ;AAAA,MACR,YAAY;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACd;AAAA,MACA,QAAQ;AAAA,IACZ;AAAA,EACJ;AACJ;AAGA,OAAO,OAAO;AAAA,EACV,MAAM,KAAK,QAAQ,QAAQ,IAAI,GAAG,QAAQ,IAAI,aAAa,gBAAgB,qBAAqB,MAAM;AAC1G,CAAC;AAED,eAAe,IAAI,OAAO,cAAc,EAEnC,IAAI,KAAK,YAAY,IAAI,CAAC,GAAG,OAAO,QAAuB;AACxD,MAAI,OAAO,KAAK,MAAM,EAAE,WAAW,GAAG;AAClC,QAAI,OAAO,EAAE,SAAS,0BAA0B;AAAA,EACpD,OAAO;AACH,QAAI,OAAO;AAAA,EACf;AACJ,CAAC,EAEA,IAAI,iBAAiB,YAAY,IAAI,CAAC,GAAG,OAAO,QAAa;AAC1D,MAAI,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,gBAAgB;AAAA,IAChB,gBAAgB;AAAA,EACpB;AACJ,CAAC,EAEA,IAAI,qBAAqB,YAAY,IAAI,CAAC,GAAG,OAAO,QAAuB;AACxE,QAAM,aAAa,IAAI,OAAO;AAC9B,MAAI,cAAc,mBAAmB,UAAU,GAAG;AAC9C,UAAM,aAAa,mBAAmB,UAAU;AAChD,UAAM,uBAAuB,WAAW,OAAO,WAAS,CAAC,MAAM,SAAS,UAAU,CAAC,MAAM,SAAS,MAAM;AACxG,QAAI,qBAAqB,SAAS,GAAG;AACjC,UAAI,SAAS;AACb,UAAI,OAAO,EAAE,SAAS,kDAAkD;AAAA,IAC5E,OAAO;AACH,UAAI,OAAO;AAAA,IACf;AAAA,EACJ,WAAW,YAAY;AACnB,QAAI,SAAS;AACb,QAAI,OAAO,EAAE,SAAS,kBAAkB;AAAA,EAC5C,OAAO;AACH,QAAI,OAAO;AAAA,EACf;AACJ,CAAC,EAEA,IAAI,aAAa,YAAY,IAAI,CAAC,GAAG,OAAO,QAAuB;AAChE,QAAM,eAAe,OAAO,KAAK,MAAM,EAAE,OAAO,CAAC,OAAO,QAAQ;AAC5D,UAAM,iBAAiB,kBAAkB,GAAG,EAAE,OAAO,WAAS,MAAM,SAAS,MAAM;AACnF,QAAI,eAAe,SAAS,GAAG;AAC3B,YAAM,GAAG,IAAI;AAAA,IACjB;AACA,WAAO;AAAA,EACX,GAAG,CAAC,CAAW;AAEf,MAAI,OAAO,KAAK,YAAY,EAAE,WAAW,GAAG;AACxC,QAAI,SAAS;AACb,QAAI,OAAO,EAAE,SAAS,sCAAsC;AAAA,EAChE,OAAO;AACH,QAAI,OAAO;AAAA,EACf;AACJ,CAAC;","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"adbc33df5c8f953a5848e3c70b1c02fae805aadc"},"/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/server.ts":{"path":"/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/server.ts","statementMap":{"0":{"start":{"line":6,"column":0},"end":{"line":8,"column":3}},"1":{"start":{"line":10,"column":14},"end":{"line":10,"column":31}},"2":{"start":{"line":11,"column":15},"end":{"line":11,"column":39}},"3":{"start":{"line":12,"column":2},"end":{"line":12,"column":67}},"4":{"start":{"line":13,"column":2},"end":{"line":13,"column":19}},"5":{"start":{"line":16,"column":14},"end":{"line":16,"column":23}},"6":{"start":{"line":17,"column":2},"end":{"line":19,"column":5}},"7":{"start":{"line":18,"column":4},"end":{"line":18,"column":18}},"8":{"start":{"line":20,"column":2},"end":{"line":20,"column":18}},"9":{"start":{"line":21,"column":2},"end":{"line":21,"column":26}},"10":{"start":{"line":22,"column":2},"end":{"line":30,"column":5}},"11":{"start":{"line":23,"column":4},"end":{"line":23,"column":39}},"12":{"start":{"line":24,"column":4},"end":{"line":24,"column":21}},"13":{"start":{"line":25,"column":4},"end":{"line":29,"column":6}},"14":{"start":{"line":31,"column":2},"end":{"line":31,"column":13}},"15":{"start":{"line":33,"column":0},"end":{"line":33,"column":7}}},"fnMap":{"0":{"name":"main","decl":{"start":{"line":9,"column":15},"end":{"line":9,"column":19}},"loc":{"start":{"line":9,"column":22},"end":{"line":14,"column":1}},"line":9},"1":{"name":"createApp","decl":{"start":{"line":15,"column":22},"end":{"line":15,"column":31}},"loc":{"start":{"line":15,"column":34},"end":{"line":32,"column":1}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":10},"end":{"line":17,"column":11}},"loc":{"start":{"line":17,"column":25},"end":{"line":19,"column":3}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":18},"end":{"line":22,"column":19}},"loc":{"start":{"line":22,"column":32},"end":{"line":30,"column":3}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":36},"end":{"line":7,"column":104}},"type":"cond-expr","locations":[{"start":{"line":7,"column":77},"end":{"line":7,"column":95}},{"start":{"line":7,"column":98},"end":{"line":7,"column":104}}],"line":7},"1":{"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":39}},"type":"binary-expr","locations":[{"start":{"line":11,"column":15},"end":{"line":11,"column":31}},{"start":{"line":11,"column":35},"end":{"line":11,"column":39}}],"line":11},"2":{"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":33}},"type":"binary-expr","locations":[{"start":{"line":28,"column":15},"end":{"line":28,"column":26}},{"start":{"line":28,"column":30},"end":{"line":28,"column":33}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":9,"6":9,"7":8,"8":9,"9":9,"10":9,"11":0,"12":0,"13":0,"14":9,"15":1},"f":{"0":1,"1":9,"2":8,"3":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0]},"inputSourceMap":{"version":3,"sources":["/Users/patrickbartosik/Documents/web/A3/Testing-Cours/src/server.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\r\nimport Koa from \"koa\";\r\nimport path from \"path\";\r\nimport cors from \"@koa/cors\";\r\nimport hotel from \"./routes/hotel\";\r\n\r\n// Load environment variables from .env.development or .env\r\ndotenv.config({\r\n    path: path.resolve(process.cwd(), process.env.NODE_ENV === \"development\" ? '.env.development' : '.env'),\r\n});\r\n\r\n/**\r\n * Main entry point of the application.\r\n * Initializes the Koa application and starts the server.\r\n */\r\nasync function main(): Promise<void> {\r\n    const app = await createApp();\r\n    const port = process.env.PORT || 4201;\r\n    console.log(`Server listening on port http://localhost:${port}`);\r\n    app.listen(port);\r\n}\r\n\r\n/**\r\n * Initializes and configures the Koa application.\r\n * @returns The initialized Koa application.\r\n */\r\nexport async function createApp(): Promise<Koa> {\r\n    const app = new Koa();\r\n\r\n    /**\r\n     * Middleware that attaches the Shopify client to each request.\r\n     */\r\n    app.use((ctx, next) => {\r\n        return next();\r\n    });\r\n\r\n    // Enable CORS\r\n    app.use(cors());\r\n\r\n    app.use(hotel.routes());\r\n\r\n    /**\r\n     * Global error handling middleware.\r\n     */\r\n    app.on('error', (err, ctx) => {\r\n        console.error('server error', err);\r\n        ctx.status = 500;\r\n        ctx.body = {\r\n            \"status\": 500,\r\n            \"message\": \"Internal server error\",\r\n            \"error\": err.message || \" \"\r\n        };\r\n    });\r\n\r\n    return app;\r\n}\r\n\r\nmain();\r\n"],"mappings":"AAAA,YAAY,YAAY;AACxB,OAAO,SAAS;AAChB,OAAO,UAAU;AACjB,OAAO,UAAU;AACjB,OAAO,WAAW;AAGlB,OAAO,OAAO;AAAA,EACV,MAAM,KAAK,QAAQ,QAAQ,IAAI,GAAG,QAAQ,IAAI,aAAa,gBAAgB,qBAAqB,MAAM;AAC1G,CAAC;AAMD,eAAe,OAAsB;AACjC,QAAM,MAAM,MAAM,UAAU;AAC5B,QAAM,OAAO,QAAQ,IAAI,QAAQ;AACjC,UAAQ,IAAI,6CAA6C,IAAI,EAAE;AAC/D,MAAI,OAAO,IAAI;AACnB;AAMA,sBAAsB,YAA0B;AAC5C,QAAM,MAAM,IAAI,IAAI;AAKpB,MAAI,IAAI,CAAC,KAAK,SAAS;AACnB,WAAO,KAAK;AAAA,EAChB,CAAC;AAGD,MAAI,IAAI,KAAK,CAAC;AAEd,MAAI,IAAI,MAAM,OAAO,CAAC;AAKtB,MAAI,GAAG,SAAS,CAAC,KAAK,QAAQ;AAC1B,YAAQ,MAAM,gBAAgB,GAAG;AACjC,QAAI,SAAS;AACb,QAAI,OAAO;AAAA,MACP,UAAU;AAAA,MACV,WAAW;AAAA,MACX,SAAS,IAAI,WAAW;AAAA,IAC5B;AAAA,EACJ,CAAC;AAED,SAAO;AACX;AAEA,KAAK;","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a52e10086a0c68593ed90266d5115a1f49d1be3e"}}